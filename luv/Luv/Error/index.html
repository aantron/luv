<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Error (luv.Luv.Error)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">luv</a> &#x00BB; <a href="../index.html">Luv</a> &#x00BB; Error</nav><header class="odoc-preamble"><h1>Module <code><span>Luv.Error</span></code></h1><p>Error handling.</p><p>See <a href="../../../basics.html#error-handling"><i>Error handling</i></a> in the user guide and <a href="http://docs.libuv.org/en/v1.x/errors.html"><i>Error handling</i></a> in libuv.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>[ </span></code><ol><li id="type-t.E2BIG" class="def variant constructor anchored"><a href="#type-t.E2BIG" class="anchor"></a><code><span>| </span><span>`E2BIG</span></code></li><li id="type-t.EACCES" class="def variant constructor anchored"><a href="#type-t.EACCES" class="anchor"></a><code><span>| </span><span>`EACCES</span></code></li><li id="type-t.EADDRINUSE" class="def variant constructor anchored"><a href="#type-t.EADDRINUSE" class="anchor"></a><code><span>| </span><span>`EADDRINUSE</span></code></li><li id="type-t.EADDRNOTAVAIL" class="def variant constructor anchored"><a href="#type-t.EADDRNOTAVAIL" class="anchor"></a><code><span>| </span><span>`EADDRNOTAVAIL</span></code></li><li id="type-t.EAFNOSUPPORT" class="def variant constructor anchored"><a href="#type-t.EAFNOSUPPORT" class="anchor"></a><code><span>| </span><span>`EAFNOSUPPORT</span></code></li><li id="type-t.EAGAIN" class="def variant constructor anchored"><a href="#type-t.EAGAIN" class="anchor"></a><code><span>| </span><span>`EAGAIN</span></code></li><li id="type-t.EAI_ADDRFAMILY" class="def variant constructor anchored"><a href="#type-t.EAI_ADDRFAMILY" class="anchor"></a><code><span>| </span><span>`EAI_ADDRFAMILY</span></code></li><li id="type-t.EAI_AGAIN" class="def variant constructor anchored"><a href="#type-t.EAI_AGAIN" class="anchor"></a><code><span>| </span><span>`EAI_AGAIN</span></code></li><li id="type-t.EAI_BADFLAGS" class="def variant constructor anchored"><a href="#type-t.EAI_BADFLAGS" class="anchor"></a><code><span>| </span><span>`EAI_BADFLAGS</span></code></li><li id="type-t.EAI_BADHINTS" class="def variant constructor anchored"><a href="#type-t.EAI_BADHINTS" class="anchor"></a><code><span>| </span><span>`EAI_BADHINTS</span></code></li><li id="type-t.EAI_CANCELED" class="def variant constructor anchored"><a href="#type-t.EAI_CANCELED" class="anchor"></a><code><span>| </span><span>`EAI_CANCELED</span></code></li><li id="type-t.EAI_FAIL" class="def variant constructor anchored"><a href="#type-t.EAI_FAIL" class="anchor"></a><code><span>| </span><span>`EAI_FAIL</span></code></li><li id="type-t.EAI_FAMILY" class="def variant constructor anchored"><a href="#type-t.EAI_FAMILY" class="anchor"></a><code><span>| </span><span>`EAI_FAMILY</span></code></li><li id="type-t.EAI_MEMORY" class="def variant constructor anchored"><a href="#type-t.EAI_MEMORY" class="anchor"></a><code><span>| </span><span>`EAI_MEMORY</span></code></li><li id="type-t.EAI_NODATA" class="def variant constructor anchored"><a href="#type-t.EAI_NODATA" class="anchor"></a><code><span>| </span><span>`EAI_NODATA</span></code></li><li id="type-t.EAI_NONAME" class="def variant constructor anchored"><a href="#type-t.EAI_NONAME" class="anchor"></a><code><span>| </span><span>`EAI_NONAME</span></code></li><li id="type-t.EAI_OVERFLOW" class="def variant constructor anchored"><a href="#type-t.EAI_OVERFLOW" class="anchor"></a><code><span>| </span><span>`EAI_OVERFLOW</span></code></li><li id="type-t.EAI_PROTOCOL" class="def variant constructor anchored"><a href="#type-t.EAI_PROTOCOL" class="anchor"></a><code><span>| </span><span>`EAI_PROTOCOL</span></code></li><li id="type-t.EAI_SERVICE" class="def variant constructor anchored"><a href="#type-t.EAI_SERVICE" class="anchor"></a><code><span>| </span><span>`EAI_SERVICE</span></code></li><li id="type-t.EAI_SOCKTYPE" class="def variant constructor anchored"><a href="#type-t.EAI_SOCKTYPE" class="anchor"></a><code><span>| </span><span>`EAI_SOCKTYPE</span></code></li><li id="type-t.EALREADY" class="def variant constructor anchored"><a href="#type-t.EALREADY" class="anchor"></a><code><span>| </span><span>`EALREADY</span></code></li><li id="type-t.EBADF" class="def variant constructor anchored"><a href="#type-t.EBADF" class="anchor"></a><code><span>| </span><span>`EBADF</span></code></li><li id="type-t.EBUSY" class="def variant constructor anchored"><a href="#type-t.EBUSY" class="anchor"></a><code><span>| </span><span>`EBUSY</span></code></li><li id="type-t.ECANCELED" class="def variant constructor anchored"><a href="#type-t.ECANCELED" class="anchor"></a><code><span>| </span><span>`ECANCELED</span></code></li><li id="type-t.ECONNABORTED" class="def variant constructor anchored"><a href="#type-t.ECONNABORTED" class="anchor"></a><code><span>| </span><span>`ECONNABORTED</span></code></li><li id="type-t.ECONNREFUSED" class="def variant constructor anchored"><a href="#type-t.ECONNREFUSED" class="anchor"></a><code><span>| </span><span>`ECONNREFUSED</span></code></li><li id="type-t.ECONNRESET" class="def variant constructor anchored"><a href="#type-t.ECONNRESET" class="anchor"></a><code><span>| </span><span>`ECONNRESET</span></code></li><li id="type-t.EDESTADDRREQ" class="def variant constructor anchored"><a href="#type-t.EDESTADDRREQ" class="anchor"></a><code><span>| </span><span>`EDESTADDRREQ</span></code></li><li id="type-t.EEXIST" class="def variant constructor anchored"><a href="#type-t.EEXIST" class="anchor"></a><code><span>| </span><span>`EEXIST</span></code></li><li id="type-t.EFAULT" class="def variant constructor anchored"><a href="#type-t.EFAULT" class="anchor"></a><code><span>| </span><span>`EFAULT</span></code></li><li id="type-t.EFBIG" class="def variant constructor anchored"><a href="#type-t.EFBIG" class="anchor"></a><code><span>| </span><span>`EFBIG</span></code></li><li id="type-t.EFTYPE" class="def variant constructor anchored"><a href="#type-t.EFTYPE" class="anchor"></a><code><span>| </span><span>`EFTYPE</span></code></li><li id="type-t.EHOSTUNREACH" class="def variant constructor anchored"><a href="#type-t.EHOSTUNREACH" class="anchor"></a><code><span>| </span><span>`EHOSTUNREACH</span></code></li><li id="type-t.EILSEQ" class="def variant constructor anchored"><a href="#type-t.EILSEQ" class="anchor"></a><code><span>| </span><span>`EILSEQ</span></code></li><li id="type-t.EINTR" class="def variant constructor anchored"><a href="#type-t.EINTR" class="anchor"></a><code><span>| </span><span>`EINTR</span></code></li><li id="type-t.EINVAL" class="def variant constructor anchored"><a href="#type-t.EINVAL" class="anchor"></a><code><span>| </span><span>`EINVAL</span></code></li><li id="type-t.EIO" class="def variant constructor anchored"><a href="#type-t.EIO" class="anchor"></a><code><span>| </span><span>`EIO</span></code></li><li id="type-t.EISCONN" class="def variant constructor anchored"><a href="#type-t.EISCONN" class="anchor"></a><code><span>| </span><span>`EISCONN</span></code></li><li id="type-t.EISDIR" class="def variant constructor anchored"><a href="#type-t.EISDIR" class="anchor"></a><code><span>| </span><span>`EISDIR</span></code></li><li id="type-t.ELOOP" class="def variant constructor anchored"><a href="#type-t.ELOOP" class="anchor"></a><code><span>| </span><span>`ELOOP</span></code></li><li id="type-t.EMFILE" class="def variant constructor anchored"><a href="#type-t.EMFILE" class="anchor"></a><code><span>| </span><span>`EMFILE</span></code></li><li id="type-t.EMLINK" class="def variant constructor anchored"><a href="#type-t.EMLINK" class="anchor"></a><code><span>| </span><span>`EMLINK</span></code></li><li id="type-t.EMSGSIZE" class="def variant constructor anchored"><a href="#type-t.EMSGSIZE" class="anchor"></a><code><span>| </span><span>`EMSGSIZE</span></code></li><li id="type-t.ENAMETOOLONG" class="def variant constructor anchored"><a href="#type-t.ENAMETOOLONG" class="anchor"></a><code><span>| </span><span>`ENAMETOOLONG</span></code></li><li id="type-t.ENETDOWN" class="def variant constructor anchored"><a href="#type-t.ENETDOWN" class="anchor"></a><code><span>| </span><span>`ENETDOWN</span></code></li><li id="type-t.ENETUNREACH" class="def variant constructor anchored"><a href="#type-t.ENETUNREACH" class="anchor"></a><code><span>| </span><span>`ENETUNREACH</span></code></li><li id="type-t.ENFILE" class="def variant constructor anchored"><a href="#type-t.ENFILE" class="anchor"></a><code><span>| </span><span>`ENFILE</span></code></li><li id="type-t.ENOBUFS" class="def variant constructor anchored"><a href="#type-t.ENOBUFS" class="anchor"></a><code><span>| </span><span>`ENOBUFS</span></code></li><li id="type-t.ENODATA" class="def variant constructor anchored"><a href="#type-t.ENODATA" class="anchor"></a><code><span>| </span><span>`ENODATA</span></code></li><li id="type-t.ENODEV" class="def variant constructor anchored"><a href="#type-t.ENODEV" class="anchor"></a><code><span>| </span><span>`ENODEV</span></code></li><li id="type-t.ENOENT" class="def variant constructor anchored"><a href="#type-t.ENOENT" class="anchor"></a><code><span>| </span><span>`ENOENT</span></code></li><li id="type-t.ENOMEM" class="def variant constructor anchored"><a href="#type-t.ENOMEM" class="anchor"></a><code><span>| </span><span>`ENOMEM</span></code></li><li id="type-t.ENONET" class="def variant constructor anchored"><a href="#type-t.ENONET" class="anchor"></a><code><span>| </span><span>`ENONET</span></code></li><li id="type-t.ENOPROTOOPT" class="def variant constructor anchored"><a href="#type-t.ENOPROTOOPT" class="anchor"></a><code><span>| </span><span>`ENOPROTOOPT</span></code></li><li id="type-t.ENOSPC" class="def variant constructor anchored"><a href="#type-t.ENOSPC" class="anchor"></a><code><span>| </span><span>`ENOSPC</span></code></li><li id="type-t.ENOSYS" class="def variant constructor anchored"><a href="#type-t.ENOSYS" class="anchor"></a><code><span>| </span><span>`ENOSYS</span></code></li><li id="type-t.ENOTCONN" class="def variant constructor anchored"><a href="#type-t.ENOTCONN" class="anchor"></a><code><span>| </span><span>`ENOTCONN</span></code></li><li id="type-t.ENOTDIR" class="def variant constructor anchored"><a href="#type-t.ENOTDIR" class="anchor"></a><code><span>| </span><span>`ENOTDIR</span></code></li><li id="type-t.ENOTEMPTY" class="def variant constructor anchored"><a href="#type-t.ENOTEMPTY" class="anchor"></a><code><span>| </span><span>`ENOTEMPTY</span></code></li><li id="type-t.ENOTSOCK" class="def variant constructor anchored"><a href="#type-t.ENOTSOCK" class="anchor"></a><code><span>| </span><span>`ENOTSOCK</span></code></li><li id="type-t.ENOTSUP" class="def variant constructor anchored"><a href="#type-t.ENOTSUP" class="anchor"></a><code><span>| </span><span>`ENOTSUP</span></code></li><li id="type-t.ENOTTY" class="def variant constructor anchored"><a href="#type-t.ENOTTY" class="anchor"></a><code><span>| </span><span>`ENOTTY</span></code></li><li id="type-t.ENXIO" class="def variant constructor anchored"><a href="#type-t.ENXIO" class="anchor"></a><code><span>| </span><span>`ENXIO</span></code></li><li id="type-t.EOF" class="def variant constructor anchored"><a href="#type-t.EOF" class="anchor"></a><code><span>| </span><span>`EOF</span></code></li><li id="type-t.EOVERFLOW" class="def variant constructor anchored"><a href="#type-t.EOVERFLOW" class="anchor"></a><code><span>| </span><span>`EOVERFLOW</span></code></li><li id="type-t.EPERM" class="def variant constructor anchored"><a href="#type-t.EPERM" class="anchor"></a><code><span>| </span><span>`EPERM</span></code></li><li id="type-t.EPIPE" class="def variant constructor anchored"><a href="#type-t.EPIPE" class="anchor"></a><code><span>| </span><span>`EPIPE</span></code></li><li id="type-t.EPROTO" class="def variant constructor anchored"><a href="#type-t.EPROTO" class="anchor"></a><code><span>| </span><span>`EPROTO</span></code></li><li id="type-t.EPROTONOSUPPORT" class="def variant constructor anchored"><a href="#type-t.EPROTONOSUPPORT" class="anchor"></a><code><span>| </span><span>`EPROTONOSUPPORT</span></code></li><li id="type-t.EPROTOTYPE" class="def variant constructor anchored"><a href="#type-t.EPROTOTYPE" class="anchor"></a><code><span>| </span><span>`EPROTOTYPE</span></code></li><li id="type-t.ERANGE" class="def variant constructor anchored"><a href="#type-t.ERANGE" class="anchor"></a><code><span>| </span><span>`ERANGE</span></code></li><li id="type-t.EROFS" class="def variant constructor anchored"><a href="#type-t.EROFS" class="anchor"></a><code><span>| </span><span>`EROFS</span></code></li><li id="type-t.ESHUTDOWN" class="def variant constructor anchored"><a href="#type-t.ESHUTDOWN" class="anchor"></a><code><span>| </span><span>`ESHUTDOWN</span></code></li><li id="type-t.ESOCKTNOSUPPORT" class="def variant constructor anchored"><a href="#type-t.ESOCKTNOSUPPORT" class="anchor"></a><code><span>| </span><span>`ESOCKTNOSUPPORT</span></code></li><li id="type-t.ESPIPE" class="def variant constructor anchored"><a href="#type-t.ESPIPE" class="anchor"></a><code><span>| </span><span>`ESPIPE</span></code></li><li id="type-t.ESRCH" class="def variant constructor anchored"><a href="#type-t.ESRCH" class="anchor"></a><code><span>| </span><span>`ESRCH</span></code></li><li id="type-t.ETIMEDOUT" class="def variant constructor anchored"><a href="#type-t.ETIMEDOUT" class="anchor"></a><code><span>| </span><span>`ETIMEDOUT</span></code></li><li id="type-t.ETXTBSY" class="def variant constructor anchored"><a href="#type-t.ETXTBSY" class="anchor"></a><code><span>| </span><span>`ETXTBSY</span></code></li><li id="type-t.EUNATCH" class="def variant constructor anchored"><a href="#type-t.EUNATCH" class="anchor"></a><code><span>| </span><span>`EUNATCH</span></code></li><li id="type-t.EXDEV" class="def variant constructor anchored"><a href="#type-t.EXDEV" class="anchor"></a><code><span>| </span><span>`EXDEV</span></code></li><li id="type-t.UNKNOWN" class="def variant constructor anchored"><a href="#type-t.UNKNOWN" class="anchor"></a><code><span>| </span><span>`UNKNOWN</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Error codes returned by libuv functions.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/errors.html#error-constants">libuv error codes</a>, which resemble <a href="http://man7.org/linux/man-pages/man3/errno.3.html#DESCRIPTION">Unix error codes</a>.</p><p><code>`EFTYPE</code> is available since Luv 0.5.5 and libuv 1.21.0.</p><p><code>`EILSEQ</code> is available since libuv 1.32.0.</p><p><code>`ENODATA</code> is available since Luv 0.5.13 and libuv 1.45.0.</p><p><code>`ENOTTY</code> is available since Luv 0.5.5 and libuv 1.16.0.</p><p><code>`EOVERFLOW</code> and <code>`ESOCKTNOSUPPORT</code> are available since Luv 0.5.9 and libuv 1.42.0.</p><p><code>`EUNATCH</code> is available since Luv 0.5.13 and libuv 1.46.0.</p><p><a href="../Require/index.html" title="Luv.Require">Feature checks</a>:</p><ul><li><code>Luv.Require.(has eftype)</code></li><li><code>Luv.Require.(has eilseq)</code></li><li><code>Luv.Require.(has enotty)</code></li><li><code>Luv.Require.(has enodata)</code></li><li><code>Luv.Require.(has eoverflow)</code></li><li><code>Luv.Require.(has esocktnosupport)</code></li><li><code>Luv.Require.(has eunatch)</code></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-strerror"><a href="#val-strerror" class="anchor"></a><code><span><span class="keyword">val</span> strerror : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the error message corresponding to the given error code.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/errors.html#c.uv_strerror_r"><code>uv_strerror_r</code></a>.</p><p>If you are using libuv 1.21.0 or earlier, <code>Luv.Error.strerror `UNKNOWN</code> slowly leaks memory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-err_name"><a href="#val-err_name" class="anchor"></a><code><span><span class="keyword">val</span> err_name : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the name of the given error code.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/errors.html#c.uv_err_name_r"><code>uv_err_name_r</code></a>.</p><p>If you are using libuv 1.21.0 or earlier, <code>Luv.Error.err_name `UNKNOWN</code> slowly leaks memory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-translate_sys_error"><a href="#val-translate_sys_error" class="anchor"></a><code><span><span class="keyword">val</span> translate_sys_error : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Converts a system error code to a libuv error code.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/errors.html#c.uv_translate_sys_error"><code>uv_translate_sys_error</code></a>.</p><p>Requires libuv 1.10.0.</p><p><a href="../Require/index.html" title="Luv.Require">Feature check</a>: <code>Luv.Require.(has translate_sys_error)</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_on_unhandled_exception"><a href="#val-set_on_unhandled_exception" class="anchor"></a><code><span><span class="keyword">val</span> set_on_unhandled_exception : <span><span>(<span>exn <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>If user code terminates a callback by raising an exception, the exception cannot be allowed to go up the call stack, because the callback was called by libuv (rather than OCaml code), and the exception would disrupt libuv book-keeping. Luv instead passes the exception to a global Luv exception handler. <code>Luv.Error.set_on_unhandled_exception f</code> replaces this exception handler with <code>f</code>.</p><p>For example, in</p><pre class="language-ocaml"><code>Luv.Error.set_on_unhandled_exception f;
Luv.File.mkdir &quot;foo&quot; (fun _ -&gt; raise Exit);</code></pre><p>the exception <code>Exit</code> is passed to <code>f</code> when <code>mkdir</code> calls its callback.</p><p>It is recommended to avoid letting exceptions escape from callbacks in this way.</p><p>The default behavior, if <a href="#val-set_on_unhandled_exception"><code>Luv.Error.set_on_unhandled_exception</code></a> is never called, is for Luv to print the exception to STDERR and exit the process with exit code 2.</p><p>It is recommended not to call <a href="#val-set_on_unhandled_exception"><code>Luv.Error.set_on_unhandled_exception</code></a> from libraries based on Luv, but, instead, to leave the decision on how to handle exceptions up to the final application.</p></div></div></div></body></html>
