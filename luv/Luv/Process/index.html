<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Process (luv.Luv.Process)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">luv</a> &#x00BB; <a href="../index.html">Luv</a> &#x00BB; Process</nav><header class="odoc-preamble"><h1>Module <code><span>Luv.Process</span></code></h1><p>Subprocesses.</p><p>See <a href="../../../processes.html"><i>Processes</i></a> in the user guide and <a href="http://docs.libuv.org/en/v1.x/process.html"><code>uv_process_t</code> <i>— Process handle</i></a> in libuv.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span><span>[ `Process ]</span> <a href="../Handle/index.html#type-t">Handle.t</a></span></span></code></div><div class="spec-doc"><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_process_t"><code>uv_process_t</code></a>.</p><p>Note that values of this type can be passed to functions in <a href="../Handle/index.html"><code>Luv.Handle</code></a>, in addition to the functions in this module. In particular, see <a href="../Handle/index.html#val-close"><code>Luv.Handle.close</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-redirection"><a href="#type-redirection" class="anchor"></a><code><span><span class="keyword">type</span> redirection</span></code></div><div class="spec-doc"><p>File descriptor redirections for use with <a href="#val-spawn"><code>Luv.Process.spawn</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_parent_pipe"><a href="#val-to_parent_pipe" class="anchor"></a><code><span><span class="keyword">val</span> to_parent_pipe : 
  <span><span class="optlabel">?readable_in_child</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?writable_in_child</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?overlapped</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">fd</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">parent_pipe</span>:<a href="../Pipe/index.html#type-t">Pipe.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-redirection">redirection</a></span></code></div><div class="spec-doc"><p>Causes <code>~fd</code> in the child to be connected to <code>~to_parent_pipe</code> in the parent.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_stdio_flags"><code>UV_CREATE_PIPE</code></a>.</p><p><code>?readable_in_child</code> sets <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_stdio_flags"><code>UV_READABLE_PIPE</code></a>, and <code>?writable_in_child</code> sets <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_stdio_flags"><code>UV_WRITABLE_PIPE</code></a>.</p><p><code>?overlapped</code> sets <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_stdio_flags"><code>UV_NONBLOCK_PIPE</code></a>. The flag was formerly known as <code>UV_OVERLAPPED_PIPE</code> in libuv. This requires libuv 1.21.0. On earlier versions, this optional argument does nothing.</p><p><a href="../Require/index.html" title="Luv.Require">Feature check</a>: <code>Luv.Require.(has overlapped_pipe)</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inherit_fd"><a href="#val-inherit_fd" class="anchor"></a><code><span><span class="keyword">val</span> inherit_fd : <span><span class="label">fd</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">from_parent_fd</span>:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-redirection">redirection</a></span></code></div><div class="spec-doc"><p>Causes <code>~fd</code> in the child to be connected to the same device or peer as <code>~from_parent_fd</code> in the parent.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_stdio_flags"><code>UV_INHERIT_FD</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inherit_stream"><a href="#val-inherit_stream" class="anchor"></a><code><span><span class="keyword">val</span> inherit_stream : 
  <span><span class="label">fd</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">from_parent_stream</span>:<span><span class="type-var">_</span> <a href="../Stream/index.html#type-t">Stream.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-redirection">redirection</a></span></code></div><div class="spec-doc"><p>Same as <a href="#val-inherit_fd"><code>Luv.Process.inherit_fd</code></a>, but takes a <a href="../Stream/index.html#type-t"><code>Luv.Stream.t</code></a> for the parent file descriptor.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_stdio_flags"><code>UV_INHERIT_STREAM</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stdin"><a href="#val-stdin" class="anchor"></a><code><span><span class="keyword">val</span> stdin : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stdout"><a href="#val-stdout" class="anchor"></a><code><span><span class="keyword">val</span> stdout : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stderr"><a href="#val-stderr" class="anchor"></a><code><span><span class="keyword">val</span> stderr : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn"><a href="#val-spawn" class="anchor"></a><code><span><span class="keyword">val</span> spawn : 
  <span><span class="optlabel">?loop</span>:<a href="../Loop/index.html#type-t">Loop.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?on_exit</span>:<span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">exit_status</span>:int64 <span class="arrow">&#45;&gt;</span></span> <span><span class="label">term_signal</span>:int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?environment</span>:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?working_directory</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?redirect</span>:<span><a href="#type-redirection">redirection</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?uid</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gid</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?windows_verbatim_arguments</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?detached</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?windows_hide</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?windows_hide_console</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?windows_hide_gui</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?windows_file_path_exact_name</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-t">t</a>, <a href="../Error/index.html#type-t">Error.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Starts a process.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_spawn"><code>uv_spawn</code></a>.</p><p>Most of the optional arguments correspond to the fields of <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_process_options_t"><code>uv_process_options_t</code></a>, which are documented <a href="http://docs.libuv.org/en/v1.x/process.html#public-members">here</a>. The remaining arguments correspond to flags from <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_process_flags"><code>uv_process_flags</code></a>.</p><p>On Unix, the <code>~term_signal</code> argument to <code>?on_exit</code> will be non-zero if the process was terminated by a signal. In this case, the <code>~exit_status</code> is invalid.</p><p>On Windows, <code>~term_signal</code> and <code>~exit_status</code> are independent of each other. <code>~term_signal</code> is set by <a href="#val-kill"><code>Luv.Process.kill</code></a>, i.e. it is emulated by libuv. The operating system separately reports <code>~exit_status</code>, so it is always valid. If there is an error retrieving <code>~exit_status</code> from the OS, it is set to a negative value.</p><p>Redirections for STDIN, STDOUT, STDERR that are not specified are set by Luv to <code>UV_IGNORE</code>. This causes libuv to open new file descriptors for the child process, and redirect them to <code>/dev/null</code> or <code>nul</code>.</p><p><code>?windows_hide_console</code> and <code>?windows_hide_gui</code> have no effect on libuv prior to 1.24.0. <code>?windows_file_path_exact_name</code> has no effect on libuv prior to 1.48.0.</p><p><a href="../Require/index.html" title="Luv.Require">Feature checks</a>:</p><ul><li><code>Luv.Require.(has process_windows_hide_console)</code></li><li><code>Luv.Require.(has process_windows_hide_gui)</code></li><li><code>Luv.Require.(has process_windows_file_path_exact_name)</code></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-disable_stdio_inheritance"><a href="#val-disable_stdio_inheritance" class="anchor"></a><code><span><span class="keyword">val</span> disable_stdio_inheritance : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Disables (tries) file descriptor inheritance for inherited descriptors.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_disable_stdio_inheritance"><code>uv_disable_stdio_inheritance</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kill"><a href="#val-kill" class="anchor"></a><code><span><span class="keyword">val</span> kill : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <a href="../Error/index.html#type-t">Error.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Sends the given signal to the process.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_process_kill"><code>uv_process_kill</code></a>. See <a href="http://man7.org/linux/man-pages/man3/kill.3p.html"><code>kill(3p)</code></a>.</p><p>See <a href="../Signal/index.html"><code>Luv.Signal</code></a> for signal numbers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kill_pid"><a href="#val-kill_pid" class="anchor"></a><code><span><span class="keyword">val</span> kill_pid : <span><span class="label">pid</span>:int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <a href="../Error/index.html#type-t">Error.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Sends the given signal to the process with the given pid.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_kill"><code>uv_kill</code></a>.</p><p>See <a href="../Signal/index.html"><code>Luv.Signal</code></a> for signal numbers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pid"><a href="#val-pid" class="anchor"></a><code><span><span class="keyword">val</span> pid : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Evaluates to the pid of the process.</p><p>Binds <a href="http://docs.libuv.org/en/v1.x/process.html#c.uv_process_get_pid"><code>uv_process_get_pid</code></a>.</p></div></div></div></body></html>
